{"version":3,"names":["uuid","NativeModules","Platform","LINKING_ERROR","select","ios","default","ExpoAlarmModule","Proxy","get","Error","multiply","a","b","show","text","scheduleAlarm","alarm","Alarm","set","toAndroid","console","log","JSON","stringify","enableAlarm","uid","enable","disableAlarm","disable","stopAlarm","stop","snoozeAlarm","snooze","removeAlarm","remove","updateAlarm","update","removeAllAlarms","removeAll","getAllAlarms","alarms","getAll","map","fromAndroid","getAlarm","getAlarmState","getState","constructor","params","getParam","v4","enabled","title","description","hour","Date","getHours","minutes","getMinutes","snoozeInterval","repeating","active","days","getDay","getEmpty","toAndroidDays","fromAndroidDays","getTimeString","getTime","timeDate","setMinutes","setHours","param","key","defaultValue","undefined","e","daysArray","day","d"],"sources":["index.tsx"],"sourcesContent":["import uuid from 'react-native-uuid';\nimport { NativeModules, Platform } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'expo-alarm-module' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst ExpoAlarmModule = NativeModules.ExpoAlarmModule\n  ? NativeModules.ExpoAlarmModule\n  : new Proxy(\n    {},\n    {\n      get() {\n        throw new Error(LINKING_ERROR);\n      },\n    }\n  );\n\nexport function multiply(a: number, b: number): Promise<number> {\n  return ExpoAlarmModule.multiply(a, b);\n}\n\nexport function show(text: string): any {\n  return ExpoAlarmModule.show(text);\n}\n\n\nexport async function scheduleAlarm(alarm: Alarm) {\n  if (!(alarm instanceof Alarm)) {\n    alarm = new Alarm(alarm);\n  }\n  await ExpoAlarmModule.set(alarm.toAndroid());\n  console.log('scheduling alarm: ', JSON.stringify(alarm))\n}\n\nexport async function enableAlarm(uid: number) {\n  await ExpoAlarmModule.enable(uid);\n}\n\nexport async function disableAlarm(uid: number) {\n  await ExpoAlarmModule.disable(uid);\n}\n\nexport async function stopAlarm() {\n  await ExpoAlarmModule.stop();\n}\n\nexport async function snoozeAlarm() {\n  await ExpoAlarmModule.snooze();\n}\n\nexport async function removeAlarm(uid: number) {\n  await ExpoAlarmModule.remove(uid);\n}\n\nexport async function updateAlarm(alarm: Alarm) {\n  if (!(alarm instanceof Alarm)) {\n    alarm = new Alarm(alarm);\n  }\n  await ExpoAlarmModule.update(alarm.toAndroid());\n}\n\nexport async function removeAllAlarms() {\n  await ExpoAlarmModule.removeAll();\n}\n\nexport async function getAllAlarms() {\n  const alarms = await ExpoAlarmModule.getAll();\n  return alarms.map((a: any) => Alarm.fromAndroid(a));\n}\n\nexport async function getAlarm(uid: number) {\n  const alarm = await ExpoAlarmModule.get(uid);\n  return Alarm.fromAndroid(alarm)\n}\n\nexport async function getAlarmState() {\n  return ExpoAlarmModule.getState();\n}\n\nexport default class Alarm {\n\n  uid?: number | undefined;\n  enabled?: boolean | undefined;\n  title?: string | undefined;\n  description?: string | undefined;\n  hour?: number | undefined;\n  minutes?: number | undefined;\n  snoozeInterval?: number | undefined;\n  repeating?: boolean | undefined;\n  active?: boolean | undefined;\n  days?: number[] | undefined;\n\n  constructor(params: any = null) {\n    this.uid = getParam(params, 'uid', uuid.v4());\n    this.enabled = getParam(params, 'enabled', true);\n    this.title = getParam(params, 'title', 'Alarm');\n    this.description = getParam(params, 'description', 'Wake up');\n    this.hour = getParam(params, 'hour', new Date().getHours());\n    this.minutes = getParam(params, 'minutes', new Date().getMinutes() + 2);\n    this.snoozeInterval = getParam(params, 'snoozeInterval', 1);\n    this.repeating = getParam(params, 'repeating', false);\n    this.active = getParam(params, 'active', true);\n    this.days = getParam(params, 'days', [new Date().getDay()]);\n  }\n\n  static getEmpty() {\n    return new Alarm({\n      title: '',\n      description: '',\n      hour: 0,\n      minutes: 0,\n      repeating: false,\n      days: [],\n    });\n  }\n\n  toAndroid() {\n    return {\n      ...this,\n      days: toAndroidDays(this.days)\n    }\n  }\n\n  static fromAndroid(alarm: Alarm) {\n    alarm.days = fromAndroidDays(alarm.days);\n    return new Alarm(alarm);\n  }\n\n  getTimeString() {\n    if (this.minutes && this.hour) {\n      const hour = this.hour < 10 ? '0' + this.hour : this.hour;\n      const minutes = this.minutes < 10 ? '0' + this.minutes : this.minutes;\n      return { hour, minutes };\n    } else {\n      return {};\n    }\n  }\n\n  getTime() {\n    const timeDate = new Date();\n    if (this.minutes && this.hour) {\n      timeDate.setMinutes(this.minutes);\n      timeDate.setHours(this.hour);\n    } else {\n      return {};\n    }\n    return timeDate;\n  }\n\n}\n\nfunction getParam(param: any, key: any, defaultValue: any) {\n  try {\n    if (param && (param[key] !== null || param[key] !== undefined)) {\n      return param[key];\n    } else {\n      return defaultValue;\n    }\n  } catch (e) {\n    return defaultValue;\n  }\n}\n\nexport function toAndroidDays(daysArray: number[] | undefined) {\n  if (daysArray) {\n    return daysArray.map(day => (day + 1) % 7);\n  }\n  else {\n    return [];\n  }\n}\n\nexport function fromAndroidDays(daysArray: number[] | undefined) {\n  if (daysArray) {\n    return daysArray.map(d => d === 0 ? 6 : d - 1);\n  } else {\n    return [];\n  }\n}\n"],"mappings":"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"}